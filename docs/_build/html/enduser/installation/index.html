
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Standard installation &mdash; Domogik 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Domogik 0.1 documentation" href="../../index.html" />
    <link rel="next" title="Configure external access to Domogik" href="external.html" />
    <link rel="prev" title="Terms to know before using Domogik" href="../terms.html" />
 
<script type="text/javascript" src="../../templatebuiltins.js"></script>
<script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script>

  </head>
  <body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Domogik 0.1 documentation</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Table of contents" href="../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../genindex.html">Index</a>  |
      </div>
      <div class="nav">
    &laquo; <a href="../terms.html" title="Terms to know before using Domogik">previous</a> 
     |
    <a title="Domogik 0.1 documentation" href="../../index.html" accesskey="U">up</a>
   |
    <a href="external.html" title="Configure external access to Domogik">next</a> &raquo;</div>
    </div>
    
    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="enduser-installation-index">
            
  <div class="section" id="standard-installation">
<h1>Standard installation<a class="headerlink" href="#standard-installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>These examples assume Debian or another apt-based distribution (Ubuntu, etc).  Adjust accordingly (eg, use yum instead if using RedHat-based distribution).</li>
<li>Domogik includes its own xPL hub.  If you are running another xPL hub on your target machine (xpl-perl, etc), you will have to stop it before installation.</li>
</ul>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Mac installation</p>
</div>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Check your Python version with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python</span> <span class="o">-</span><span class="n">V</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Right now Domogik <strong>requires Python 2.6/2.7</strong>. Python 3 is not (yet) supported.</p>
</div>
<p>If you don&#8217;t already have Python 2.6/2.7 or above (you have it if you are running a recent Linux system), then you can run for example:</p>
<div class="highlight-python"><pre>$ apt-get install python2.6
$ ln -sf /usr/bin/python2.6 /usr/bin/python</pre>
</div>
<p>Even if you have python2.6 or higher installed, check that the development package is also installed, or do (<strong>replace 2.X with your version</strong>):</p>
<div class="highlight-python"><pre>$ apt-get install python2.X-dev gcc</pre>
</div>
<p>Install SSL librairies:</p>
<div class="highlight-python"><pre>$ apt-get install libssl-dev</pre>
</div>
<p>Install librairies for mysql access and command line client:</p>
<div class="highlight-python"><pre>$ apt-get install libmysqlclient-dev mysql-client</pre>
</div>
</div>
<div class="section" id="mysql-server">
<h3>Mysql server<a class="headerlink" href="#mysql-server" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have already a Mysql server installed, you will only have to create the Domogik database.</p>
</div>
<p>Install packages for mysql server:</p>
<div class="highlight-python"><pre>$ apt-get install mysql-server-5.0</pre>
</div>
<p>Or if mysql 5.1 is available on your Linux system:</p>
<div class="highlight-python"><pre>$ apt-get install mysql-server-5.1</pre>
</div>
<p>Log on the mysql database as root user:</p>
<div class="highlight-python"><pre>$ mysql -u root -p
Enter password:</pre>
</div>
<p>Create a database called &#8220;domogik&#8221;:</p>
<div class="highlight-python"><pre>mysql&gt; CREATE DATABASE domogik;
Query OK, 1 row affected (0.00 sec)</pre>
</div>
<p>Create the user &#8220;domogik&#8221; to use the new database:</p>
<div class="highlight-python"><pre>mysql&gt; GRANT ALL PRIVILEGES ON domogik.* to domogik@localhost IDENTIFIED BY 'domopass';
Query OK, 0 rows affected (0.00 sec)

mysql&gt;exit</pre>
</div>
</div>
<div class="section" id="download-domogik">
<h3>Download Domogik<a class="headerlink" href="#download-domogik" title="Permalink to this headline">¶</a></h3>
<p>Go on <a class="reference external" href="http://wiki.domogik.org/Download">Download</a> to get Domogik.
You will get a file named <strong>domogik-&lt;release&gt;.tgz</strong>. Download it and extract it:</p>
<div class="highlight-python"><pre>$ wget http://repo.domogik.org/...
$ tar xvzf domogik-&lt;release&gt;.tgz
$ cd domogik-&lt;release&gt;</pre>
</div>
</div>
<div class="section" id="install-domogik">
<h3>Install Domogik<a class="headerlink" href="#install-domogik" title="Permalink to this headline">¶</a></h3>
<p>From <strong>domogik-&lt;release&gt;</strong> folder, run the install:</p>
<div class="highlight-python"><pre>$ sudo ./install.sh</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">During installation, a new user will be created if necessary.</p>
</div>
<p>You will be asked for the following questions:</p>
<div class="highlight-python"><pre>If you want to use a proxy, please set it now. It will only be used during the installation. (ex: http://1.2.3.4:8080)</pre>
</div>
<p>During the installation, some python librairies could be downloaded. If you use a proxy, you must set it here.</p>
<div class="highlight-bash"><div class="highlight"><pre>Which user will run domogik, it will be created <span class="k">if </span>it does not exist yet? <span class="o">(</span>default : domogik<span class="o">)</span>
</pre></div>
</div>
<p>System user that will launch Domogik. You should keep the default choice.</p>
<p>If the choosen user doesn&#8217;t exists, you will have to answser following questions:</p>
<div class="highlight-python"><pre>Enter new UNIX password:
...
Retype new UNIX password:
...
Changing the user information for domogik
Enter the new value, or press ENTER for the default
    Full Name []:
    Room Number []:
    Work Phone []:
    Home Phone []:
    Other []:
Is the information correct? [Y/n]
...</pre>
</div>
<p>Enter twice a password for the user and eventually, fill values about the new user:</p>
<div class="highlight-python"><pre>You already have a .domogik.cfg file. Do you want to keep it ? [Y/n]</pre>
</div>
<p>If you already have a Domogik config file, you will be asked for keeping it or not:</p>
<div class="highlight-python"><pre>Which interface do you want to bind to? (default : lo) :</pre>
</div>
<p>To use Domogik only on a local computer, choose <strong>lo</strong>. To access it from another computer or use multi host features, choose the appropriate network interface (e.g. : <strong>eth0</strong>):</p>
<div class="highlight-python"><pre>If you need to access Domogik from outside, you can specify an IP now :</pre>
</div>
<p>Used to access to Domogik over the internet.
You can set your public IP here (depending on your configuration, you could need to create a port redirection on your router.
..warning:: Domogik is not yet secure, use this with caution!</p>
<div class="highlight-bash"><div class="highlight"><pre>You need to have a working Mysql server with a domogik user and database.
You can create it using these commands <span class="o">(</span>as mysql admin user<span class="o">)</span> :
 &gt; CREATE DATABASE domogik;
 &gt; GRANT ALL PRIVILEGES ON domogik.* to domogik@localhost IDENTIFIED BY <span class="s1">&#39;randompassword&#39;</span>;
Press Enter to <span class="k">continue </span>the installation when your setup is ok.
</pre></div>
</div>
<p>If you have installed Mysql server and create the Domogik database, just press Enter.</p>
<p>Set connection informations for the database:</p>
<div class="highlight-python"><pre>Please set your mysql parameters.
Username : domogik
Password : domopass
Port [3306] :
Host [localhost] :
Database name [domogik]:</pre>
</div>
<div class="highlight-bash"><div class="highlight"><pre>Your database already contains some tables, <span class="k">do </span>you want to drop them. If you choose No, new items will *NOT* be installed ? <span class="o">[</span>Y/n<span class="o">]</span>

In <span class="k">case </span>the Domogik database is not empty <span class="o">(</span>it is not the first installation<span class="o">)</span>, you will get this warning.
Depending on your needs choose the appropriate option. Y choice will delete all existing data.
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre>Everything seems to be good, Domogik should be installed correctly.
I will start the test_config.py script to check it.
Please press Enter when ready.
</pre></div>
</div>
<p>Just press enter to start the check script:</p>
<div class="highlight-python"><pre>==&gt; ================================================== &lt;==
==&gt;  Everything seems ok, you should be able to start  &lt;==
==&gt;       Domogik with /etc/init.d/domogik start       &lt;==
==&gt;             or /etc/rc.d/domogik start             &lt;==
==&gt; ================================================== &lt;==</pre>
</div>
<p>The installation is finished and seems to be OK.</p>
</div>
<div class="section" id="optional-postgresql-instead-of-mysql">
<h3>Optional : postgresql (instead of mysql)<a class="headerlink" href="#optional-postgresql-instead-of-mysql" title="Permalink to this headline">¶</a></h3>
<p>If you wish to use postgresql instead of mysql</p>
<ul class="simple">
<li>Create your database</li>
<li>Edit your <em>.domogik.cfg</em> file and put database information : db_type (postgresql), db_user, db_password...</li>
</ul>
</div>
<div class="section" id="make-domogik-start-with-your-computer">
<h3>Make Domogik start with your computer<a class="headerlink" href="#make-domogik-start-with-your-computer" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>For Debian or Ubuntu systems: ::</dt>
<dd># update-rc.d domogik defaults</dd>
</dl>
<p>For Archlinux:
Add <em>&#64;domogik</em> at the very end of the line starting with <em>DAEMON</em>.</p>
</div>
<div class="section" id="start-domogik">
<h3>Start domogik<a class="headerlink" href="#start-domogik" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>sudo /etc/init.d/domogik start
* Starting XPL... Done.
* Starting Manager <span class="o">(</span>with -d -r -p<span class="o">)</span>...
 <span class="o">[</span>INFO<span class="o">]</span> Check <span class="k">if </span>dbmgr is running.
 <span class="o">[</span>INFO<span class="o">]</span> Check <span class="k">if </span>rest is running.
 <span class="o">[</span>INFO<span class="o">]</span> Start dbmgr on ambre
 <span class="o">[</span>OK<span class="o">]</span> Component dbmgr started with pid 18351
 <span class="o">[</span>INFO<span class="o">]</span> Check non-system plugins to start at manager startup.
 <span class="o">[</span>INFO<span class="o">]</span> Start rest on ambre
 <span class="o">[</span>OK<span class="o">]</span> Component rest started with pid 18366
 <span class="o">[</span>OK<span class="o">]</span> System manager initialized.
 * Starting Django... Done.
</pre></div>
</div>
<p>It will start :</p>
<ul class="simple">
<li>The xpl hub</li>
<li>The Domogik manager on this host</li>
<li>The database manager and the REST interface module (which will take in account the parameters you defined in your configuration file : host, IP...)</li>
<li>The web interface</li>
</ul>
<p>Now, you can access the UI using this url : <a class="reference external" href="http://127.0.0.1:40404/domogik">http://127.0.0.1:40404/domogik</a> (adapt to your ip/port defined during the installation).</p>
<p>To access to the administration panel :
* login : admin
* password : 123</p>
</div>
<div class="section" id="it-doesn-t-work">
<h3>It doesn&#8217;t work?<a class="headerlink" href="#it-doesn-t-work" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://wiki.domogik.org/Errors_and_solutions">See errors and solutions</a></li>
</ul>
</div>
</div>
<div class="section" id="what-next">
<h2>What next?<a class="headerlink" href="#what-next" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../configuration/index.html"><em>First Use of Domogik</em></a></li>
<li><a class="reference internal" href="external.html"><em>Configure external access to Domogik</em></a></li>
<li>See the <a class="reference internal" href="../configuration/plugins/index.html"><em>Plugins section</em></a> to use and configure plugins</li>
</ul>
</div>
</div>


          </div>         
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Standard installation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#mysql-server">Mysql server</a></li>
<li><a class="reference internal" href="#download-domogik">Download Domogik</a></li>
<li><a class="reference internal" href="#install-domogik">Install Domogik</a></li>
<li><a class="reference internal" href="#optional-postgresql-instead-of-mysql">Optional : postgresql (instead of mysql)</a></li>
<li><a class="reference internal" href="#make-domogik-start-with-your-computer">Make Domogik start with your computer</a></li>
<li><a class="reference internal" href="#start-domogik">Start domogik</a></li>
<li><a class="reference internal" href="#it-doesn-t-work">It doesn&#8217;t work?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-next">What next?</a></li>
</ul>
</li>
</ul>

  <h3>Browse</h3>
  <ul>
    
      <li>Prev: <a href="../terms.html">Terms to know before using Domogik</a></li>
    
    
      <li>Next: <a href="external.html">Configure external access to Domogik</a></li>
    
  </ul>
  <h3>You are here:</h3>
  <ul>
      <li>
        <a href="../../index.html">Domogik 0.1 documentation</a>
        
        <ul><li>Standard installation</li></ul>
        
      </li>
  </ul>  

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/enduser/installation/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
          </div> 
        
      
    </div>
    
    <div id="ft">
      <div class="nav">
    &laquo; <a href="../terms.html" title="Terms to know before using Domogik">previous</a> 
     |
    <a title="Domogik 0.1 documentation" href="../../index.html" accesskey="U">up</a>
   |
    <a href="external.html" title="Configure external access to Domogik">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>