{% extends "layout_admin.html" %}
{% comment %}
# Copyright 2008 Domogik project

# This file is part of Domogik.
# Domogik is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# Domogik is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with Domogik.  If not, see <http://www.gnu.org/licenses/>.

# Author : Cédric Trévisan <cedric@domogik.org> {% endcomment %}


{% load i18n %}
{% block css %}
    <link href="/design/{{ request.session.user.skin_used|default:'skins/default' }}/css/ui-tables.css" rel="stylesheet" type="text/css" />
    <link href="/design/{{ request.session.user.skin_used|default:'skins/default' }}/css/page-admin-organization.css" rel="stylesheet" type="text/css" />
{% endblock %}
{% block js_include %}
{% endblock %}
{% block js_script %}
    $(function(){
        // Accordion
        $("#nav2").accordion({ header: ".subnav2", active:0});
    });
{% endblock %}
{% block title %}{% trans page_title %}{% endblock %}

{% block banner %}
    <div class="section">
        <h1 class="ident"><span class="title">{% trans "Devices" %}</span></h1>
        {% ifnotequal status "" %}
        <div id='messages' class='{{status}}'>{{msg}}</div>
        {% endifnotequal %}
        <ul class="actions"></ul>
    </div>
{% endblock %}

{% block right %}
    <div class="subsection">
        <h2>{% trans "Devices list" %}</h2>
        <div id="tabs">
            {% spaceless %}
            <ul>
                {% regroup devices_list|dictsort:"room" by room as rooms_list %}
                {% for room in rooms_list %}
                    <li><a id="tab{{ room.grouper.id }}" href="#element{{ room.grouper.id }}" class="icon16-area-{{ room.grouper.config.icon }}">{{ room.grouper.name }}</a></li>
                {% endfor %}
            </ul>
            {% endspaceless %}
            {% for area in areas_list %}
            <div id="element{{ area.id }}" class="tabelement">
                <table>
                    <tr>
                        <th>{% trans "Name" %}</th>
                        <th>{% trans "Description" %}</th>
                        <th>{% trans "Address" %}</th>
                        <th>{% trans "Reference" %}</th>
                        <th>{% trans "Usage" %}</th>
                        <th>{% trans "Type" %}</th>
                        <th>{% trans "Room" %}</th>
                    </tr>
                    {% for device in devices_list %}
                    <tr>
                        <td>{{ device.name }}</td>
                        <td>{{ device.description }}</td>
                        <td>{{ device.address }}</td>
                        <td>{{ device.reference }}</td>
                        <td>{{ device.usage_id }}</td>
                        <td>{{ device.type_id }}</td>
                        <td>{{ device.room_id }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            {% endfor %}
        </div>
        <div id="addnewdialog" title='{% trans "Create new area" %}'>
            <p id="validateTips">{% trans "All fields are required." %}</p>
            <form>
                <fieldset>
                    <label class="medium" for="new_name">{% trans "Name" %}</label>
                    <input type="text" class="medium" id="new_name" name="new_name" />
                    <label class="medium" for="new_description">{% trans "Description" %}</label>
                    <textarea type="text" class="medium" id="new_description" name="new_description"></textarea>
                </fieldset>
            </form>
        </div>
    </div>
{% endblock %}
