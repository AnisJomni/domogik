{% extends "base/base.html" %}

{% block content %}
  <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
  <pre id="codeDiv" style="height: 500px; width: 600px; position: absolute; left: 650px; top: 100px; border: 1px red"></pre>

<xml id="toolbox" style="display: none"><category name="Logique"><block type="controls_if"></block><block type="logic_compare"></block><block type="logic_operation"></block><block type="logic_negate"></block><block type="logic_boolean"></block><block type="logic_null"></block><block type="logic_ternary"></block></category><category name="Boucles"><block type="controls_repeat_ext"><value name="TIMES"><block type="math_number"><field name="NUM">10</field></block></value></block><block type="controls_whileUntil"></block><block type="controls_for"><value name="FROM"><block type="math_number"><field name="NUM">1</field></block></value><value name="TO"><block type="math_number"><field name="NUM">10</field></block></value><value name="BY"><block type="math_number"><field name="NUM">1</field></block></value></block><block type="controls_forEach"></block><block type="controls_flow_statements"></block></category><category name="Math"><block type="math_number"></block><block type="math_arithmetic"></block><block type="math_single"></block><block type="math_trig"></block><block type="math_constant"></block><block type="math_number_property"></block><block type="math_change"><value name="DELTA"><block type="math_number"><field name="NUM">1</field></block></value></block><block type="math_round"></block><block type="math_on_list"></block><block type="math_modulo"></block><block type="math_constrain"><value name="LOW"><block type="math_number"><field name="NUM">1</field></block></value><value name="HIGH"><block type="math_number"><field name="NUM">100</field></block></value></block><block type="math_random_int"><value name="FROM"><block type="math_number"><field name="NUM">1</field></block></value><value name="TO"><block type="math_number"><field name="NUM">100</field></block></value></block><block type="math_random_float"></block></category><category name="Texte"><block type="text"></block><block type="text_join"></block><block type="text_append"><value name="TEXT"><block type="text"></block></value></block><block type="text_length"></block><block type="text_isEmpty"></block><block type="text_indexOf"><value name="VALUE"><block type="variables_get"><field name="VAR">texte</field></block></value></block><block type="text_charAt"><value name="VALUE"><block type="variables_get"><field name="VAR">texte</field></block></value></block><block type="text_getSubstring"><value name="STRING"><block type="variables_get"><field name="VAR">texte</field></block></value></block><block type="text_changeCase"></block><block type="text_trim"></block><block type="text_print"></block><block type="text_prompt_ext"><value name="TEXT"><block type="text"></block></value></block></category><category name="Listes"><block type="lists_create_empty"></block><block type="lists_create_with"></block><block type="lists_repeat"><value name="NUM"><block type="math_number"><field name="NUM">5</field></block></value></block><block type="lists_length"></block><block type="lists_isEmpty"></block><block type="lists_indexOf"><value name="VALUE"><block type="variables_get"><field name="VAR">liste</field></block></value></block><block type="lists_getIndex"><value name="VALUE"><block type="variables_get"><field name="VAR">liste</field></block></value></block><block type="lists_setIndex"><value name="LIST"><block type="variables_get"><field name="VAR">liste</field></block></value></block><block type="lists_getSublist"><value name="LIST"><block type="variables_get"><field name="VAR">liste</field></block></value></block></category><category name="Couleur"><block type="colour_picker"></block><block type="colour_random"></block><block type="colour_rgb"></block><block type="colour_blend"></block></category><category name="Variables" custom="VARIABLE"></category><category name="Fonctions" custom="PROCEDURE"></category></xml>

  <script type="text/javascript" src="/static/libraries/blockly/blockly_compressed.js"></script>
  <script type="text/javascript" src="/static/libraries/blockly/blocks_compressed.js"></script>
  <script type="text/javascript" src="/static/libraries/blockly/msg/js/en.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/colour.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/lists.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/logic.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/loops.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/math.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/procedures.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/text.js"></script>
  <script type="text/javascript" src="/static/js/blockly_generators/domogik/variables.js"></script>
  <script>
    Blockly.inject(document.getElementById('blocklyDiv'),
        {path: '/static/libraries/blockly/', toolbox: document.getElementById('toolbox')});

    function onchange() {
      document.getElementById('codeDiv').innerHTML = Blockly.Domogik.workspaceToCode();
    }
    Blockly.addChangeListener(onchange);

  </script>
{% endblock %}
