====================
Plugin documentation
====================

Purpose
=======
The purpose of this plugin is to manage the dawn and dusk over XPL.
It sends a dawn (or dusk) message over XPL when dawn (or dusk) occurs.
It can also be asked to know if it is the day or the night.
See documentation `here <http://developer.telldus.se/wiki/TellStick_conf>`_ for more details.

Dependencies
============

apscheduler (>=2.0.2)

pyephem (>=3.7.5)

Plugin configuration
====================

Configuration
-------------
In Domogik administration, go to the dawndusk configuration page.

Global configuration

+---------------+---------------+-----------------------------------------------------------------------------------------------------+
|Key            | Default value | Description                                                                                         |
+===============+===============+=====================================================================================================+
| longitude     |               | The longitude of the house.  Use your GPS or Google maps to find it.                                |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| latitude      |               | The latitude of the house.  Use your GPS or Google maps to find it.                                 |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| cron          | No            | Use external cron like the cron plugin to schedule events.                                          |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| test          | No            | For test. Will send a dawn (a dusk) message 1min (6mins) after plugin starts.                       |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+

Devices configuration.

+---------------+---------------+-----------------------------------------------------------------------------------------------------+
|Key            | Default value | Description                                                                                         |
+===============+===============+=====================================================================================================+
| xpltype       | xpl-cmnd      | Xpltype to use in the message.                                                                      |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| schema        | telldus.basic | Schema to use to send command.                                                                      |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| addname       | device        | Address field name (device).                                                                        |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| add           | TS3           | Device address.                                                                                     |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| command       | command       | Command to send to the device.                                                                      |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| dawn          | on            | Value of command when a dawn event occurs.                                                          |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| dusk          | off           | Value of command when a dusk event occurs.                                                          |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| dawnseconds   | 0             | Value in +/- seconds after/before dawn event.                                                       |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+
| duskseconds   | 0             | Value in +/- seconds after/before dusk event.                                                       |
+---------------+---------------+-----------------------------------------------------------------------------------------------------+

Creating devices for dawndusk
-----------------------------
In administration, go to Organization > Devices page to create your devices.

Status
******

.. |example_status| image:: example_status.png
    :width: 200px

+--------------------+-------------------+--------------------------------------------------------------------------------------------+
| Example            | Key               | Description                                                                                |
+====================+===================+============================================================================================+
| |example_status|   | Name              | The name you want to give to the device.                                                   |
|                    +-------------------+--------------------------------------------------------------------------------------------+
|                    | Address           | You must set this field to dawndusk.                                                       |
|                    +-------------------+--------------------------------------------------------------------------------------------+
|                    | Feature           | dawndusk.status                                                                            |
|                    +-------------------+--------------------------------------------------------------------------------------------+
|                    | Usage             | All                                                                                        |
|                    +-------------------+--------------------------------------------------------------------------------------------+
|                    | Description       | Show the status of the dawn/dusk.                                                          |
+--------------------+-------------------+--------------------------------------------------------------------------------------------+

Start the plugin
----------------
You can now start the plugin (start button) and use the created devices.

Configure the features widgets on Domoweb
-----------------------------------------
You can now place the widgets of your devices features on Domoweb.

