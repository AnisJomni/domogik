====================
The plugin file tree
====================

The plugin file tree will at least contains (assuming the plugin name is *myplugin*):

* **start.sh** : a script to start the plugin manually
* **__init__.py** : an empty file needed by python
* **info.json** : the json file which describe the plugin and its features. This file must always be named like this!
* **bin/** : the main python program will be in this folder

  * **bin/__init__.py** : an empty file needed by python
  * **bin/myplugin.py** : the python main part. This file must be always named like this : **bin/myplugin.py**. Example for the *diskfree* plugin : *bin/diskfree.py*.

* **lib/** : the python libraries
  
  * **lib/__init__.py** : an empty file needed by python
  * **lib/myplugin.py** : the python library part

* **docs/** : the sphynx documentation in ReST format
* **design/** : this folder will contain all graphical resources (icons, ...)

  * **design/icon.png** : the plugin icon (png, 96px * 96px). This file must always be named like this!


Some other items may be added: 

* **data** : if needed this folder can contain data needed by the plugin or the plugin may write data in it
* **conversions** : TODO
* **tests** : if the plugin have some tests scripts, they must be here





A ceci nous allons ajouter quelques fichiers pour simplifier la vie du développeur.

Tout d’abord, créons un fichier start.sh (adaptez la 1ère ligne avec l’id de votre plugin) :

PLUGIN_ID=ipx800
echo "export PYTHONPATH=/var/lib/domogik && /usr/bin/python bin/$PLUGIN_ID.py" > start.sh
chmod u+x start.sh

Ce fichier servira à lancer le plugin en ligne de commande. Le plugin ne sera pas lancé en tâche de fond et vous verrez tous ses logs défiler sur la sortir standard. Pour l’arrêter, un (CTRL)-(C) suffira.
La directive export PYTHONPATH=/var/lib/domogik permet à python de chercher des librairies dans ce dossier, ce qui est nécessaire pour le chargement des librairies de notre plugin.

Ensuite, créons un fichier insert_data.sh :

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! TODO

Ce fichier aura pour effet de charger les données du fichier json dans la base de données. En cas de modifications des parties du fichier json qui vont en base, il faudra lancer ce script.

!!!!!!!!!!!!!!! TODO : penser à lister quelles parties sont concernées

!!!!! changelog ????
!!!!! readme ????
