<package type="plugin">
  <name>teleinfo</name>
  <technology>service</technology>
  <description>Get power consumption with teleinfo</description>
  <detail>Teleinfo is a french method to get power related informations.</detail>
  <version>0.1.0</version>
  <documentation>http://wiki.domogik.org/plugin_teleinfo</documentation>
  <author>Maxence Dunnewind</author>
  <author-email>maxence at dunnewind.net</author-email>
  <domogik-min-version>0.1.0</domogik-min-version>
  <configuration-keys>
    <key>
      <order-id>0</order-id>
      <name>startup-plugin</name>
      <type>boolean</type>
      <description>Automatically start plugin at Domogik startup</description>
      <default-value>False</default-value>
    </key>
    <key>
      <order-id>1</order-id>
      <name>device</name>
      <type>string</type>
      <description>Teleinfo device (ex : /dev/ttyUSB0 for an usb model)</description>
      <default-value>/dev/teleinfo</default-value>
    </key>
    <key>
      <order-id>2</order-id>
      <name>interval</name>
      <type>number</type>
      <description>Interval between each request (seconds)</description>
      <default-value>60</default-value>
    </key>
  </configuration-keys>
  <files>
    <file path="src/share/domogik/plugins/teleinfo.xml"/>
    <file path="src/share/domogik/stats/teleinfo/teleinfo.basic-teleinfo.xml"/>
    <file path="src/share/domogik/stats/teleinfo/teleinfo.short-teleinfo.xml"/>
    <file path="src/domogik/xpl/bin/teleinfo.py"/>
    <file path="src/domogik/xpl/lib/teleinfo.py"/>
  </files>
  <dependencies>
    <dep name="pyserial (>=2.5)"/>
  </dependencies>
  <device_technology>
      <id>service</id>
      <name>Service</name>
      <description>Distributed services, water, gas, electricity</description>
  </device_technology>
  <device_types>
      <device_type>
          <id>service.teleinfo</id>
          <device_technology_id>service</device_technology_id>
          <name>Teleinfo</name>
          <description>Teleinfo</description>
      </device_type>
  </device_types>
  <device_feature_models>
      <device_feature_model>
          <id>service.teleinfo.max_power</id>
          <name>Maximum power</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>imax</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.instant_power</id>
          <name>Instant power</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;}
          </parameters>
          <value_type>number</value_type>
          <stat_key>iinst</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.off_peak_hours</id>
          <name>Off peak hours</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;Wh&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>hchc</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.peak_hours</id>
          <name>Peak hours</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;Wh&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>hchp</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.tariff_period</id>
          <name>Tariff period</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {} 
          </parameters>
          <value_type>string</value_type>
          <stat_key>ptec</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.apparent_power</id>
          <name>Apparent power</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;Va&quot;}
          </parameters>
          <value_type>number</value_type>
          <stat_key>papp</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.hourly_group</id>
          <name>Hourly group</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {} 
          </parameters>
          <value_type>string</value_type>
          <stat_key>hhphc</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.instant_power_1</id>
          <name>Instant power on phasis 1</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;}
          </parameters>
          <value_type>number</value_type>
          <stat_key>iinst1</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.instant_power_2</id>
          <name>Instant power on phasis 2</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;}
          </parameters>
          <value_type>number</value_type>
          <stat_key>iinst2</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.instant_power_3</id>
          <name>Instant power on phasis 3</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;}
          </parameters>
          <value_type>number</value_type>
          <stat_key>iinst3</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.max_power_1</id>
          <name>Maximum power on phasis 1</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>imax1</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.max_power_2</id>
          <name>Maximum power on phasis 2</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>imax2</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
      <device_feature_model>
          <id>service.teleinfo.max_power_3</id>
          <name>Maximum power on phasis 3</name>
          <feature_type>sensor</feature_type>
          <device_type_id>service.teleinfo</device_type_id>
          <parameters>
              {&quot;unit&quot;:&quot;A&quot;} 
          </parameters>
          <value_type>number</value_type>
          <stat_key>imax3</stat_key>
          <return_confirmation>0</return_confirmation>
      </device_feature_model>
  </device_feature_models>
</package>
